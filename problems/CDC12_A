<head>
<meta charset="utf-8">
</head>
<style type="text/css">
	a { text-decoration: none }
	p { line-height: 1.8; }
	th {text-align: left; }
</style>
<font face="verdana"><p>
<a href="http://www.spoj.com/problems/CDC12_A"target="_blank">View problem on Spoj</a><br>
<table width="100%" style="margin-top:10px">
<tr>
	<td>
		<h2>SPOJ Problem Set (classical)</h2>
				<h1>12556. Another Traffic Problem</h1>
		<h2>Problem code: CDC12_A</h2>
	</td>
	</tr>
</table>

<p align="justify">
<p>&nbsp;</p>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">One day in a faraway city, Ronny, a famous scientist, was stuck in traffic once again. This thing</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">happens everyday when he tries to get back home from work. But this time it was different,</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">Ronny was working in a project that includes these situations about traffic and stuff. So in</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">the middle of this dense traffic, Ronny started to think about a very interesting problem that</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">includes traffic and how the cities are connected, including their avenues and intersections. The</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">problem goes like this: There are at most N cities, connected by at most M roads. These roads</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">are in one direction, so if you can go from city A to city B, then you can&rsquo;t go from city B to city</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">A. Following this scheme, every road will lead always forward from Ronny&rsquo;s work to Ronny&rsquo;s</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">house.</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">In a city i there are at most Ai avenues and at most Ii intersections, these ones are not in a</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">singular direction. If an avenue Z let you go from the intersection X to intersection Y, then the</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">same avenue Z will let you go from Y to X.</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">Due the horrible traffic that hits the cities everyday and the smoke derivated from it, the au-</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">thorities of each one of them will close a bunch of roads, allowing only one way from intersection</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">1 to intersection Ii . This only way will be the way with the maximum capacity, i.e., there exist</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">no other way with a higher capacity than this. Obviously, the capacity of this way is determined</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">by the street with the minimum capacity.</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">Due to the horrible traffic that hit the cities everyday, the authorities of each city close some</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">avenues to avoid the city to overheat with the cars&rsquo; smoke. Of course, they will keep open</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">those avenues that leads from the begining to the end of the city, i.e., from intersection 1 to</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">intersection Ii . Beside that, the authorities will close exactly those avenues that are strictly not</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">necesarily to maximize the ammount of vehicles that can transit in the city at a time.</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">Fortunately, Ronny knows every little detail about the problem, even data! But not the an-</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">swers. He will give you all the data of the problem, i.e., the number of cities, how are they</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">connected, and the structure of each city, their avenues and how they connect their intesections.</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">You may know that every road that goes from city A to city B, connects the last intersection of</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">city A to the first intersection of city B. Ronny need your help to figure out whats the maximum</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">ammount of vehicles that can go from Ronny&rsquo;s work to Ronny&rsquo;s house at a time.</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">Input</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">The first line contains an integer T , which specifies the number of test cases. Then, will follow</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">the descriptions of T test cases.</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">Every test case will have a line with 2 integers, N and M . Then N descriptions will follow,</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">with a string N ame (That represents the name of the city, this one will contain only lower case</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">CEIDEC 2012 - Contest Session</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">2</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">letters) and 2 integers Ii and Ai . Then Ai lines with 3 integers, X, Y and Cap; this mean</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">that there is an avenue between the intersections X and Y with a capacity of Cap vehicles.</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">After all N descriptions, M lines will follow, with 2 strings, S and D, and one integer C. This</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">indicates that exists a road that goes from city S to city D with capacity of C vehicles at a</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">time. You should know that Ronny&rsquo;s house and Ronny&rsquo;s work are valid cities, but they&rsquo;re not</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">included on the N cities that were mentioned before. These &rdquo;special&rdquo; cities are going to be</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">called "ronnys_house" and "ronnys_work". It is sure that it will exist at least one way to get</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">from Ronny&rsquo;s work to Ronny&rsquo;s house.</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">The input must be read from standard input.</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">Output</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">For each input case you must print "Scenario #i: " where i is the number of the test case</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">that you are evaluating (Starting by 1). Then you have to print a single integer that maximum</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">ammount of vehicules that can transit from Ronny&rsquo;s house to Ronny&rsquo;s work.</div>
<div id="_mcePaste" style="position: absolute; left: -10000px; top: 0px; width: 1px; height: 1px; overflow: hidden;">The output must be written to standard output.</div>
<p>&nbsp;</p>
<p>One day in a faraway city, Ronny, a famous scientist, was stuck in traffic once again. This thing</p>
<p>happens everyday when he tries to get back home from work. But this time it was different,</p>
<p>Ronny was working in a project that includes these situations about traffic and stuff. So in</p>
<p>the middle of this dense traffic, Ronny started to think about a very interesting problem that</p>
<p>includes traffic and how the cities are connected, including their avenues and intersections. The</p>
<p>problem goes like this: There are at most N cities, connected by at most M roads. These roads</p>
<p>are in one direction, so if you can go from city A to city B, then you can&rsquo;t go from city B to city</p>
<p>A. Following this scheme, every road will lead always forward from Ronny&rsquo;s work to Ronny&rsquo;s</p>
<p>house.</p>
<p>&nbsp;</p>
<p>In a city i there are at most Ai avenues and at most Ii intersections, these ones are not in a</p>
<p>singular direction. If an avenue Z let you go from the intersection X to intersection Y, then the</p>
<p>same avenue Z will let you go from Y to X.</p>
<p>Due the horrible traffic that hits the cities everyday and the smoke derivated from it, the au-</p>
<p>thorities of each one of them will close a bunch of roads, allowing only one way from intersection</p>
<p>1 to intersection Ii . This only way will be the way with the maximum capacity, i.e., there exist</p>
<p>no other way with a higher capacity than this. Obviously, the capacity of this way is determined</p>
<p>by the street with the minimum capacity.</p>
<p>&nbsp;</p>
<p>Due to the horrible traffic that hit the cities everyday, the authorities of each city close some</p>
<p>avenues to avoid the city to overheat with the cars&rsquo; smoke. Of course, they will keep open</p>
<p>those avenues that leads from the begining to the end of the city, i.e., from intersection 1 to</p>
<p>intersection Ii . Beside that, the authorities will close exactly those avenues that are strictly not</p>
<p>necesarily to maximize the ammount of vehicles that can transit in the city at a time.</p>
<p>Fortunately, Ronny knows every little detail about the problem, even data! But not the an-</p>
<p>swers. He will give you all the data of the problem, i.e., the number of cities, how are they</p>
<p>connected, and the structure of each city, their avenues and how they connect their intesections.</p>
<p>You may know that every road that goes from city A to city B, connects the last intersection of</p>
<p>city A to the first intersection of city B. Ronny need your help to figure out whats the maximum</p>
<p>ammount of vehicles that can go from Ronny&rsquo;s work to Ronny&rsquo;s house at a time.</p>
<p>&nbsp;</p>
<p><strong>Input</strong></p>
<p>The first line contains an integer T , which specifies the number of test cases. Then, will follow</p>
<p>the descriptions of T test cases.</p>
<p>Every test case will have a line with 2 integers, N and M . Then N descriptions will follow,</p>
<p>with a string N ame (That represents the name of the city, this one will contain only lower case</p>
<p>letters) and 2 integers Ii and Ai . Then Ai lines with 3 integers, X, Y and Cap; this mean</p>
<p>that there is an avenue between the intersections X and Y with a capacity of Cap vehicles.</p>
<p>After all N descriptions, M lines will follow, with 2 strings, S and D, and one integer C. This</p>
<p>indicates that exists a road that goes from city S to city D with capacity of C vehicles at a</p>
<p>time. You should know that Ronny&rsquo;s house and Ronny&rsquo;s work are valid cities, but they&rsquo;re not</p>
<p>included on the N cities that were mentioned before. These &rdquo;special&rdquo; cities are going to be</p>
<p>called "ronnys_house" and "ronnys_work". It is sure that it will exist at least one way to get</p>
<p>from Ronny&rsquo;s work to Ronny&rsquo;s house.</p>
<p>The input must be read from standard input.</p>
<p>&nbsp;</p>
<p><strong>Output</strong></p>
<p>For each input case you must print "Scenario #i: " where i is the number of the test case</p>
<p>that you are evaluating (Starting by 1). Then you have to print a single integer that maximum</p>
<p>ammount of vehicules that can transit from Ronny&rsquo;s house to Ronny&rsquo;s work.</p>
<p>The output must be written to standard output.</p>
<div>
<table border="2">
<tbody>
<tr>
<td>Input</td>
<td>Output</td>
</tr>
<tr align="left" valign="top">
<td>
<p>2</p>
<p>2 4</p>
<p>caracas 4 4</p>
<p>1 2 2</p>
<p>1 3 2</p>
<p>2 3 2</p>
<p>2 4 1</p>
<p>valencia 4 5</p>
<p>1 2 2</p>
<p>1 3 3</p>
<p>1 4 5</p>
<p>2 4 1</p>
<p>3 4 1</p>
<p>ronnys_work caracas 4</p>
<p>ronnys_work valencia 5</p>
<p>caracas ronnys_house 2</p>
<p>valencia ronnys_house 3</p>
<p>4 7</p>
<p>caracas 4 4</p>
<p>1 2 2</p>
<p>1 3 2</p>
<p>2 3 2</p>
<p>2 4 1</p>
<p>valencia 4 4</p>
<p>1 2 2</p>
<p>1 3 3</p>
<p>1 4 5</p>
<p>3 4 1</p>
<p>maracay 3 2</p>
<p>1 2 2</p>
<p>2 3 2</p>
<p>maracaibo 5 6</p>
<p>1&nbsp;3 5</p>
<p>1 4 2</p>
<p>2 3 4</p>
<p>2 4 4</p>
<p>2 5 3</p>
<p>4 5 4</p>
<p>ronnys_work caracas 4</p>
<p>ronnys_work maracaibo 5</p>
<p>ronnys_work maracay 3</p>
<p>caracas valencia 2</p>
<p>maracay valencia 3</p>
<p>valencia ronnys_house 4</p>
<p>maracaibo ronnys_house 3</p>
</td>
<td>
<p>Scenario #1: 4</p>
<p>Scenario #2: 6</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>Constraints</strong></p>
<p style="padding-left: 30px;">&bull; 1 &le; T &le; 10</p>
<p style="padding-left: 30px;">&bull; 1 &le; N &le; 100</p>
<p style="padding-left: 30px;">&bull; 1 &le; Ii &le; 30</p>
<p style="padding-left: 30px;">&bull; 1 &le; |S|, |D|, |N ame| &le; 20</p>
<p style="padding-left: 30px;">&bull; 1 &le; X, Y &le; Ii</p>
<p style="padding-left: 30px;">&bull; 1 &le; C, Cap &le; 10,000</p>
<p>&nbsp;</p>

<hr>
<table border=0 cellspacing=0 cellpadding=0 align=left style="margin-bottom:10px" class="probleminfo">
<tr><td>Added by:</td><td><a href="/SPOJ/users/vplcontest">Venezuelan Programming League</a></td></tr>
<tr><td>Date:</td><td>2012-10-27</td></tr>
<tr><td>Time limit:</td><td>1s
</td></tr>
<tr><td>Source limit:</td><td>50000B</td></tr>
<tr><td>Memory limit:</td><td>1536MB</td></tr>
	<tr>
		<td>Cluster:</td>
		<td>
							<a href="/clusters/" target="_blank">Cube (Intel Pentium G860 3GHz)</a>
					
		</td>
	</tr>
<tr><td>Languages:</td><td>All except: SCM chicken </td></tr>
<tr><td>Resource:</td><td>Own problem used for UCV-CEIDEC contest.</td></tr>	
</table>
