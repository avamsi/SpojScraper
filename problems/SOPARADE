<head>
<meta charset="utf-8">
</head>
<style type="text/css">
	a { text-decoration: none }
	p { line-height: 1.8; }
	th {text-align: left; }
</style>
<font face="verdana"><p>
<a href="http://www.spoj.com/problems/SOPARADE"target="_blank">View problem on Spoj</a><br>
<table width="100%" style="margin-top:10px">
<tr>
	<td>
		<h2>SPOJ Problem Set (classical)</h2>
				<h1>217. Soldiers on Parade</h1>
		<h2>Problem code: SOPARADE</h2>
	</td>
	</tr>
</table>

<p align="justify">
<p>Protocol is really weird in Byteland. For instance, it is required that, when presenting arms before an officer, soldiers should stand in a single row (at positions numbered from 1 to <i>n</i>). Soldiers may have one of 4 possible ranks, distinguished by the number of squiggles on the epaulets (between 1 and 4). Soldiers standing beside each other must have a difference in rank of at least two squiggles. Moreover, there are additional sets of rules (different for every province). Each rule states that soldiers standing at some given positions of the row must differ in rank by at least a squiggle.
<p>Starting from the new year onwards, some provinces are changing their set of protocol rules. As the Senior Military Secretary of Protocol, it is your task to approve the new rules. To your surprise, some of the provinces have put forward protocol rules which are quite impossible to fulfill, even if the soldiers were to be specially selected for the purpose of presenting arms. Detect all such offending provinces and on no account approve their laws.

<h3>Input</h3>
<p>The first line of input contains a single positive integer <i>t</i><=10 - the number of provinces which are proposing new laws. <i>t</i> sets of rules follow, separated by empty lines.
<p>
Each set of rule begins with a line containing two non-negative integers <i>n</i> <i>p</i> (<i>n</i><=100000, <i>p</i><=100000) - the number of soldiers arranged and the number of rules proposed in the province, respectively. Each of the next <i>p</i> lines contains a single rule: an integer <i>b<sub>i</sub></i> (2<=<i>b<sub>i</sub></i><=<i>n</i>), followed by <i>b<sub>i</sub></i> integers <i>a</i><sub>1</sub>,<i>a</i><sub>2</sub>,...,<i>a<sub>bi</sub></i> (1<=<i>a<sub>k</sub></i><=<i>n</i>). Such a rule means that soldiers standing at positions <i>a</i><sub>1</sub>,<i>a</i><sub>2</sub>,...,<i>a<sub>bi</sub></i> must all be of different rank.

<h3>Output</h3>
<p>For every set of rules presented at input, output a single line containing the word <tt><i>rejected</i></tt> if no unit of soldiers can be arranged in accordance with protocol, or the word <tt><i>approved</i></tt> in the opposite case.

<h3>Example</h3>

<pre>
<b>Input:</b>
2

2 1
2 1 2

5 2
3 1 3 2
4 2 3 4 5

<b>Output:</b>
approved
rejected
</pre>


<hr>
<table border=0 cellspacing=0 cellpadding=0 align=left style="margin-bottom:10px" class="probleminfo">
<tr><td>Added by:</td><td><a href="/SPOJ/users/adrian">Adrian Kosowski</a></td></tr>
<tr><td>Date:</td><td>2004-10-08</td></tr>
<tr><td>Time limit:</td><td>9s
</td></tr>
<tr><td>Source limit:</td><td>50000B</td></tr>
<tr><td>Memory limit:</td><td>1536MB</td></tr>
	<tr>
		<td>Cluster:</td>
		<td>
							<a href="/clusters/" target="_blank">Cube (Intel Pentium G860 3GHz)</a>
					
		</td>
	</tr>
<tr><td>Languages:</td><td>All except: NODEJS PERL 6 SCM chicken VB.net </td></tr>
<tr><td>Resource:</td><td>DASM Programming League 2004 (problemset 1)</td></tr>	
</table>
