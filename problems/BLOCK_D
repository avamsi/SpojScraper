<head>
<meta charset="utf-8">
</head>
<style type="text/css">
	a { text-decoration: none }
	p { line-height: 1.8; }
	th {text-align: left; }
</style>
<font face="verdana"><p>
<a href="http://www.spoj.com/problems/BLOCK_D"target="_blank">View problem on Spoj</a><br>
<table width="100%" style="margin-top:10px">
<tr>
	<td>
		<h2>SPOJ Problem Set (classical)</h2>
				<h1>13886. BLOCK_D SOLVER</h1>
		<h2>Problem code: BLOCK_D</h2>
	</td>
	</tr>
</table>

<p align="justify">
<p style="text-align: left;">You are given a board of order mxn full of coloured blocks.</p>
<p style="text-align: center;"><br /><img src="https://dl.dropbox.com/u/78558568/blockd.jpg" alt="" width="267" height="291" /></p>
<p style="text-align: left;"><br />At each move, you have to select a block of any colour which has atleast one of it's immediate neighbours of same colour. If you select a block, all the connected blocks(not just the immediate neighbours) of same colour gets destroyed. A block is connected to all the blocks that share an edge with it. Any block will fall directly down if there is no block immediately below it. If a complete column becomes empty, you must either push all the columns to it's left once in the right side or push all the columns to it's right once in the left side(These pushes are not considered as a moves. At each move, you will destroy more than one block).</p>
<p style="text-align: left;"><br />You will win the game if the remaining number of blocks becomes zero after making&nbsp; the moves. Find the minimum number of moves to win the game. If it is impossible to win the game, print -1.</p>
<p style="text-align: left;">For better understanding of gameplay you may have a look at this <a href="https://www.youtube.com/watch?v=P2-mO3K04KQ">video</a>. (optional)<br /><br /><strong>Input:</strong></p>
<p style="text-align: left;">The first line consists of an integer t, the number of test cases. For each test case the first line consists of two integers m, n the number of rows and columns respectively followed by the matrix representing the coloured blocks. Colour[i][j] contains any character between 'a' and 'e' inclusive.<br /><br /><strong>Output:</strong></p>
<p style="text-align: left;">For each test case print the minimum number of moves to win the game. If it is impossible to win, print -1.</p>
<p style="text-align: left;"><br /><strong>Input Constraints:</strong></p>
<p style="text-align: left;">1&lt;=t&lt;=10</p>
<p style="text-align: left;">1&lt;=m,n&lt;=8</p>
<p style="text-align: left;">'a'&lt;=Colour[i][j]&lt;='e'</p>
<p style="text-align: left;"><strong>Sample Input:</strong></p>
<p style="text-align: left;">2</p>
<p style="text-align: left;">5 5</p>
<p style="text-align: left;">aaaba</p>
<p style="text-align: left;">aaaba</p>
<p style="text-align: left;">aaaba</p>
<p style="text-align: left;">aaaba</p>
<p style="text-align: left;">aaaba</p>
<p style="text-align: left;">5 5</p>
<p style="text-align: left;">bbbbb</p>
<p style="text-align: left;">baabb</p>
<p style="text-align: left;">bbbab</p>
<p style="text-align: left;">bbbaa</p>
<p style="text-align: left;">aabab</p>
<p style="text-align: left;"><strong>Sample Output:</strong></p>
<p style="text-align: left;">2</p>
<p style="text-align: left;">3</p>

<hr>
<table border=0 cellspacing=0 cellpadding=0 align=left style="margin-bottom:10px" class="probleminfo">
<tr><td>Added by:</td><td><a href="/SPOJ/users/cegprakash">cegprakash</a></td></tr>
<tr><td>Date:</td><td>2013-02-24</td></tr>
<tr><td>Time limit:</td><td>10s
</td></tr>
<tr><td>Source limit:</td><td>50000B</td></tr>
<tr><td>Memory limit:</td><td>1536MB</td></tr>
	<tr>
		<td>Cluster:</td>
		<td>
							<a href="/clusters/" target="_blank">Cube (Intel Pentium G860 3GHz)</a>
					
		</td>
	</tr>
<tr><td>Languages:</td><td>All except: BF SCM chicken </td></tr>
	
</table>
